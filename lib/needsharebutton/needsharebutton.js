!function(){function d(e,o){if("string"==typeof o){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;if(t)for(;e;){if(t.bind(e)(o))return e;e=e.parentElement}return!1}for(;e;){if(e==o)return e;e=e.parentElement}return!1}window.needShareButton=function(e,o){var a=this;for(var t in a.elem=e||"need-share-button",a.getTitle=function(){var e;return document.querySelector&&(e=document.querySelector("title"))?e.innerText:document.title},a.getImage=function(){var e;return document.querySelector&&(e=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))?e.getAttribute("content"):""},a.getDescription=function(){var e;return document.querySelector?(e=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?e.getAttribute("content"):"":(e=document.getElementsByTagName("meta").namedItem("description"))?e.getAttribute("content"):""},a.share={weibo:function(e){var o=p(e),t="http://v.t.sina.com.cn/share/share.php?title="+encodeURIComponent(o.title)+"&url="+encodeURIComponent(o.url)+"&pic="+encodeURIComponent(o.image);a.popup(t)},wechat:function(e){var o=p(e),t="https://api.qinco.me/api/qr?size=400&content="+encodeURIComponent(o.url),n=e.querySelector(".need-share-button_dropdown"),r=n.getElementsByClassName("need-share-wechat-code-image")[0];r?r.remove():((r=document.createElement("img")).src=t,r.alt="loading wechat image...",r.setAttribute("class","need-share-wechat-code-image"),n.appendChild(r))},douban:function(e){var o=p(e),t="https://www.douban.com/share/service?name="+encodeURIComponent(o.title)+"&href="+encodeURIComponent(o.url)+"&image="+encodeURIComponent(o.image);a.popup(t)},qqzone:function(e){var o=p(e),t="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(o.title)+"&url="+encodeURIComponent(o.url)+"&pics="+encodeURIComponent(o.image)+"&desc="+encodeURIComponent(o.description);a.popup(t)},renren:function(e){var o=p(e),t="http://widget.renren.com/dialog/share?title="+encodeURIComponent(o.title)+"&resourceUrl="+encodeURIComponent(o.url)+"&pic="+encodeURIComponent(o.image)+"&description="+encodeURIComponent(o.description);a.popup(t)},mailto:function(e){var o=p(e),t="mailto:?subject="+encodeURIComponent(o.title)+"&body=Thought you might enjoy reading this: "+encodeURIComponent(o.url)+" - "+encodeURIComponent(o.description);window.location.href=t},twitter:function(e){var o=p(e),t=o.protocol+"twitter.com/intent/tweet?text=";t+=encodeURIComponent(o.title)+"&url="+encodeURIComponent(o.url),a.popup(t)},pinterest:function(e){var o=p(e),t=o.protocol+"pinterest.com/pin/create/bookmarklet/?is_video=false";t+="&media="+encodeURIComponent(o.image),t+="&url="+encodeURIComponent(o.url),t+="&description="+encodeURIComponent(o.title),a.popup(t)},facebook:function(e){var o=p(e),t=o.protocol+"www.facebook.com/share.php?";t+="u="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),a.popup(t)},googleplus:function(e){var o=p(e),t=o.protocol+"plus.google.com/share?";t+="url="+encodeURIComponent(o.url),a.popup(t)},reddit:function(e){var o=p(e),t=o.protocol+"www.reddit.com/submit?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),a.popup(t)},delicious:function(e){var o=p(e),t=o.protocol+"del.icio.us/post?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),t+="&notes="+encodeURIComponent(o.description),a.popup(t)},stumbleupon:function(e){var o=p(e),t=o.protocol+"www.stumbleupon.com/submit?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),a.popup(t)},linkedin:function(e){var o=p(e),t=o.protocol+"www.linkedin.com/shareArticle?mini=true";t+="&url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),t+="&source="+encodeURIComponent(o.source),a.popup(t)},slashdot:function(e){var o=p(e),t=o.protocol+"slashdot.org/bookmark.pl?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),a.popup(t)},technorati:function(e){var o=p(e),t=o.protocol+"technorati.com/faves?";t+="add="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),a.popup(t)},posterous:function(e){var o=p(e),t=o.protocol+"posterous.com/share?";t+="linkto="+encodeURIComponent(o.url),a.popup(t)},tumblr:function(e){var o=p(e),t=o.protocol+"www.tumblr.com/share?v=3";t+="&u="+encodeURIComponent(o.url),t+="&t="+encodeURIComponent(o.title),a.popup(t)},googlebookmarks:function(e){var o=p(e),t=o.protocol+"www.google.com/bookmarks/mark?op=edit";t+="&bkmk="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),t+="&annotation="+encodeURIComponent(o.description),a.popup(t)},newsvine:function(e){var o=p(e),t=o.protocol+"www.newsvine.com/_tools/seed&save?";t+="u="+encodeURIComponent(o.url),t+="&h="+encodeURIComponent(o.title),a.popup(t)},evernote:function(e){var o=p(e),t=o.protocol+"www.evernote.com/clip.action?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),a.popup(t)},friendfeed:function(e){var o=p(e),t=o.protocol+"www.friendfeed.com/share?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),a.popup(t)},vkontakte:function(e){var o=p(e),t=o.protocol+"vkontakte.ru/share.php?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),t+="&description="+encodeURIComponent(o.description),t+="&image="+encodeURIComponent(o.image),t+="&noparse=true",a.popup(t)},odnoklassniki:function(e){var o=p(e),t=o.protocol+"www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1";t+="&st.comments="+encodeURIComponent(o.description),t+="&st._surl="+encodeURIComponent(o.url),a.popup(t)},mailru:function(e){var o=p(e),t=o.protocol+"connect.mail.ru/share?";t+="url="+encodeURIComponent(o.url),t+="&title="+encodeURIComponent(o.title),t+="&description="+encodeURIComponent(o.description),t+="&imageurl="+encodeURIComponent(o.image),a.popup(t)}},a.popup=function(e){var o=void 0!==window.screenLeft?window.screenLeft:screen.left,t=void 0!==window.screenTop?window.screenTop:screen.top,n=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-300+o,r=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-250+t,i=window.open(e,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600, height=500, top="+r+", left="+n);window.focus&&i.focus()},a.options={iconStyle:"default",boxForm:"horizontal",position:"bottomCenter",protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Pinterest,Facebook,GooglePlus,Reddit,Linkedin,Tumblr,Evernote"},o)o.hasOwnProperty(t)&&(a.options[t]=o[t]);function p(e){var o={};for(var t in a.options)a.options.hasOwnProperty(t)&&(o[t]=a.options[t]);for(var n in o.url=window.location.href,o.title=a.getTitle(),o.image=a.getImage(),o.description=a.getDescription(),e.dataset)if(n.match(/share/)){var r=n.replace(/share/,"");if(!r.length)continue;r=r.charAt(0).toLowerCase()+r.slice(1);var i=e.dataset[n];"networks"===r?i=i.split(","):"url"===r&&i&&"/"===i[0]&&(i=location.origin+i),o[r]=i}return o}a.options.networks=a.options.networks.split(","),document.addEventListener("click",function(e){var o=document.querySelector(".need-share-button-opened");if(d(e.target,".need-share-button-opened"))setTimeout(function(){o.classList.remove("need-share-button-opened"),o.querySelector(".need-share-wechat-code-image")&&o.querySelector(".need-share-wechat-code-image").remove()},1);else if(o)o.classList.remove("need-share-button-opened"),o.querySelector(".need-share-wechat-code-image")&&o.querySelector(".need-share-wechat-code-image").remove();else{var t=d(e.target,a.elem);t&&(t.classList.contains("need-share-button-opened")||(!function(o){var e=document.createElement("span");if(e.className="need-share-button_dropdown",!o.querySelector(".need-share-button_dropdown")){var t=p(o);"box"==t.iconStyle&&"horizontal"==t.boxForm?e.className+=" need-share-button_dropdown-box-horizontal":"box"==t.iconStyle&&"vertical"==t.boxForm&&(e.className+=" need-share-button_dropdown-box-vertical"),setTimeout(function(){switch(t.position){case"topLeft":e.className+=" need-share-button_dropdown-top-left";break;case"topRight":e.className+=" need-share-button_dropdown-top-right";break;case"topCenter":e.className+=" need-share-button_dropdown-top-center",e.style.marginLeft=-e.offsetWidth/2+"px";break;case"middleLeft":e.className+=" need-share-button_dropdown-middle-left",e.style.marginTop=-e.offsetHeight/2+"px";break;case"middleRight":e.className+=" need-share-button_dropdown-middle-right",e.style.marginTop=-e.offsetHeight/2+"px";break;case"bottomLeft":e.className+=" need-share-button_dropdown-bottom-left";break;case"bottomRight":e.className+=" need-share-button_dropdown-bottom-right";break;case"bottomCenter":default:e.className+=" need-share-button_dropdown-bottom-center",e.style.marginLeft=-e.offsetWidth/2+"px"}},1);var n="default"==t.iconStyle?"need-share-button_link need-share-button_":"need-share-button_link-"+t.iconStyle+" need-share-button_link need-share-button_";for(var r in t.networks)if(t.networks.hasOwnProperty(r)){var i=document.createElement("span"),c=(r=t.networks[r].trim()).toLowerCase();i.className=n+c,-1===["weibo","wechat","douban","qqzone","renren"].indexOf(c)?i.className+=" social-"+c:i.className+=" icon-"+c,i.dataset.network=c,i.title=r,e.appendChild(i)}e.addEventListener("click",function(e){if(d(e.target,".need-share-button_link"))return e.preventDefault(),e.stopPropagation(),a.share[e.target.dataset.network](o),!1}),o.appendChild(e)}}(t),setTimeout(function(){t.classList.add("need-share-button-opened")},1)))}})}}();